<head>
<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<style>
#clock { font-size: 200% }
</style>
</head>

<button onclick="start()">Start</button>
<div id="clock"></div>

<script src="https://cdn.firebase.com/js/client/2.2.3/firebase.js"></script>
<script src="player.js"></script>
<script src="clock.js"></script>
<script>
var clock = new FirebaseClock();
// Play it back every 5 seconds.
var player = new PeriodicPlayer(clock, {periodSec: 5});

function start() {
  player.start();
}

function updateClock() {
  player.start();
  document.querySelector('#clock').innerHTML = Math.round(clock.getTimeUntilNextMillis(5000)) + ' ms left.';
  requestAnimationFrame(updateClock);
}
updateClock();

</script>
